{% block content %}
<div class="co-md-4">
  <div class="container-calendar">
    <h4 id="monthAndYear"></h4>
    <div class="button-container-calendar">
      <button id="previous" onclick="previous() || f()">‹</button>
      <button id="next" onclick="next() || f()">›</button>
    </div>

    <table class="table-calendar" id="calendar" data-lang="ja">
      <thead id="thead-month"></thead>

      <tbody id="calendar-body"></tbody>
    </table>

    <div class="footer-container-calendar">
      <label for="month">日付指定：</label>

      <select id="month" onchange="jump() || f()">
        <option value="0">1月</option>

        <option value="1">2月</option>

        <option value="2">3月</option>

        <option value="3">4月</option>

        <option value="4">5月</option>

        <option value="5">6月</option>

        <option value="6">7月</option>

        <option value="7">8月</option>

        <option value="8">9月</option>

        <option value="9">10月</option>

        <option value="10">11月</option>

        <option value="11">12月</option>
      </select>
      <select id="year" onchange="jump() || f()"></select>
    </div>
    <script src="../../static/js/calendar.js" type="text/javascript"></script>
    <script>
      const dlist = {{ dlist | safe }}
      today = new Date()
      todayYear = today.getFullYear()
      todayMonth = today.getMonth()
      todayDate = today.getDate()

      const f = (e) => {
        document.querySelectorAll('.date-picker').forEach((elm) => {
          const year = elm.getAttribute('data-year')
          let month = elm.getAttribute('data-month')
          month = month.length === 1 ? '0' + month : month
          let date = elm.getAttribute('data-date')
          date = date.length === 1 ? '0' + date : date
          if (dlist.indexOf(year+month+date) !== -1) {
            if(todayYear === year && todayMonth+1 === month && todayDate === date){
              elm.classList.add('selected')
            }else{
              elm.classList.add('created')
            }
          }
        })
      }
      window.onload = f;
    </script>
  </div>
</div>

{% endblock content %}
